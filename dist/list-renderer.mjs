var m=class{constructor(n){this.root=n,this.template="",this.dataForDisplay=new Array}evaluateString(n){return new Function("'use strict'; return ("+n+")")()}prepareEvents(n){let r=new Array;for(let t of n){let o=new Array;t.children.length>0&&(o=this.prepareEvents(t.children),o.length>0&&(r=r.concat(o)));let e=t.getAttribute("lr-click");e!=null&&e!=null&&(r=r.concat(e),t.setAttribute("onclick",e),t.removeAttribute("lr-click"));let c=new Array;t.children.length>0&&(c=this.prepareEvents(t.children),c.length>0&&(r=r.concat(c)));let s=t.getAttribute("lr-id");s!=null&&s!=null&&(r=r.concat(s),t.setAttribute("data-id",s),t.removeAttribute("lr-id"))}return r}findAndSetList(){this.dataForDisplay=new Array;let n=new Array,r=new Array,t=this.root.children,o=/{{(.*?)}}/g;this.template=this.root.innerHTML;for(let e in t)if(t[e].nodeType!=null&&t[e].tagName.toLowerCase()!="script"){let c=t[e].getAttribute("lr-loop"),s=this.evaluateString(c);if(c!=null){let f=this.prepareEvents(t[e].children);for(let p in t[e].children){let a=t[e].children[p];a.outerHTML!=null&&(n.push(a.getAttribute("lr-if")),a.removeAttribute("lr-if"),this.dataForDisplay.push(a.outerHTML.trim()),r.push(this.dataForDisplay[this.dataForDisplay.length-1].match(o)))}t[e].innerHTML="";for(let p in s){let a=s[p],A=new Array;for(let l in f){let i=f[l].replace("$index",p);A.push(i)}for(let l in this.dataForDisplay){let L=!0,i=this.dataForDisplay[l];for(let g in A){let d=A[g];i=i.replace(f[g],d)}let y=r[l];for(let g in y){let d=y[g],u=d.replace(o,"$1");if(n[l]!=null&&n[l].indexOf(u)!=-1){let b=n[l].replace(u,"'"+a[u]+"'");L=this.evaluateString(b)}if(!L){i="";break}let h=a[u];h==null&&(h=""),i=i.replace(d,h),h!=null&&(i=i.replace(d,h))}t[e].innerHTML+=i}}}t[e].removeAttribute("lr-loop")}}render(){this.findAndSetList()}restoreToTemplate(){this.root.innerHTML=this.template}reload(){this.restoreToTemplate(),this.render()}},T=m;export{T as default};
//# sourceMappingURL=list-renderer.mjs.map
