var f=class{constructor(e){this.root=e,this.template="",this.regexForVariables=/{{(.*?)}}/g,this.loopDatas={},this.baseTemplate="",this.singleTags=["input","img","br","hr","link","meta","base","area","col","embed","keygen","param","source","track","wbr","command"]}evaluateString(e){return new Function("'use strict'; return ("+e+")")()}parseTemplate(e,t,n,r){if(typeof e!="object")return null;let c=this.loopDatas[n][r],o="",l=e.getAttribute("lr-if");if(l!=null){let s=!0;l=l.replace("$index",r);for(let[i,a]of Object.entries(c)){let u=l.replace(i,`"${a}"`);try{s=this.evaluateString(u)}catch{continue}break}if(e.removeAttribute("lr-if"),s!=null&&!s)return e.innerHTML="",e}let g=e.getAttribute("lr-click");g!=null&&(g=g.replace("$index",r),e.setAttribute("onclick",g),e.removeAttribute("lr-click"));let d=e.getAttribute("lr-change");d!=null&&(d=d.replace("$index",r),e.setAttribute("onchange",d),e.removeAttribute("lr-change"));let p=e.getAttribute("lr-checked");p!=null&&(p=p.replace("$index",r),e.setAttribute("onchange",p),e.removeAttribute("lr-change"));let h=e.getAttribute("lr-id");if(h!=null&&(h=h.replace("$index",r),e.setAttribute("data-id",h),e.removeAttribute("lr-id")),e.children!=null&&e.children.length>0){for(let s in e.children){let i=this.parseTemplate(e.children[s],t,n,r);if(i)switch(!0){case this.singleTags.includes(i.tagName.toLowerCase()):o+=i.outerHTML;break;case i.innerHTML.trim()!="":o+=i.outerHTML;break;default:break}}e.innerHTML=""}else if(e.innerHTML!=""||this.singleTags.includes(e.tagName.toLowerCase())){let s=e.getAttributeNames();for(let i in s){let a=e.getAttribute(s[i]);a!=null&&(a=a.replace("$index",r),a=a.replace(this.regexForVariables,(u,b)=>{let T=this.evaluateString(`${t}["${b}"]`);return T==null&&(T=""),T}),e.setAttribute(s[i],a.replace("$index",r)))}this.singleTags.includes(e.tagName.toLowerCase())||(e.innerHTML=e.innerHTML.replace(this.regexForVariables,(i,a)=>{let u=this.evaluateString(`${t}["${a}"]`);return u==null&&(u=""),u}))}return o.length>0&&(e.innerHTML=o),e}renderLoop(){this.template=this.root.innerHTML;let e=this.root.children;for(let t in e)if(e[t].nodeType!=null&&e[t].tagName.toLowerCase()!="script"){let n=e[t].getAttribute("lr-loop");if(n==null||n==null)continue;let r=this.evaluateString(n);this.loopDatas[n]=r,this.baseTemplate=e[t].innerHTML;let c=new Array;if(n!=null){for(let o in r){e[t].innerHTML=this.baseTemplate;let l=this.parseTemplate(e[t],`${n}[${o}]`,n,o);l!=null&&c.push(l.innerHTML)}e[t].innerHTML=c.join("").trim(),e[t].removeAttribute("lr-loop")}}}render(){this.renderLoop()}restoreToTemplate(){this.root.innerHTML=this.template}reload(){this.restoreToTemplate(),this.render()}};globalThis.ListRenderer=f;globalThis.customElements.define("list-renderer",class extends HTMLElement{});var L=f;export{L as default};
//# sourceMappingURL=list-renderer.mjs.map
