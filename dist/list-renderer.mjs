var b=class{constructor(e){this.root=e,this.template="",this.regexForVariables=/{{(.*?)}}/g,this.loopDatas={},this.baseTemplate=""}evaluateString(e){return new Function("'use strict'; return ("+e+")")()}parseTemplate(e,t,a,r){if(typeof e!="object")return null;let u=this.loopDatas[a][r],s="",l=e.getAttribute("lr-if");if(l!=null){let i=!0;l=l.replace("$index",r);for(let[n,o]of Object.entries(u)){let c=l.replace(n,`"${o}"`);try{i=this.evaluateString(c)}catch{continue}break}if(e.removeAttribute("lr-if"),i!=null&&!i)return e.innerHTML="",e}let h=e.getAttribute("lr-click");h!=null&&(h=h.replace("$index",r),e.setAttribute("onclick",h),e.removeAttribute("lr-click"));let p=e.getAttribute("lr-change");p!=null&&(p=p.replace("$index",r),e.setAttribute("onchange",p),e.removeAttribute("lr-change"));let d=e.getAttribute("lr-checked");d!=null&&(d=d.replace("$index",r),e.setAttribute("onchange",d),e.removeAttribute("lr-change"));let f=e.getAttribute("lr-id");if(f!=null&&(f=f.replace("$index",r),e.setAttribute("data-id",f),e.removeAttribute("lr-id")),e.children!=null&&e.children.length>0){for(let i in e.children){let n=this.parseTemplate(e.children[i],t,a,r);n&&n.innerHTML.trim()!=""&&(s+=n.outerHTML)}e.innerHTML=""}else if(e.innerHTML!=""){let i=e.getAttributeNames();for(let n in i){let o=e.getAttribute(i[n]);o=o.replace("$index",r),o=o.replace(this.regexForVariables,(c,T)=>{let g=this.evaluateString(`${t}["${T}"]`);return g==null&&(g=""),g}),e.setAttribute(i[n],o.replace("$index",r))}e.innerHTML=e.innerHTML.replace(this.regexForVariables,(n,o)=>{let c=this.evaluateString(`${t}["${o}"]`);return c==null&&(c=""),c})}return s.length>0&&(e.innerHTML=s),e}renderLoop(){this.template=this.root.innerHTML;let e=this.root.children;for(let t in e)if(e[t].nodeType!=null&&e[t].tagName.toLowerCase()!="script"){let a=e[t].getAttribute("lr-loop"),r=this.evaluateString(a);this.loopDatas[a]=r,this.baseTemplate=e[t].innerHTML;let u=new Array;if(a!=null){for(let s in r){e[t].innerHTML=this.baseTemplate;let l=this.parseTemplate(e[t],`${a}[${s}]`,a,s);u.push(l.innerHTML)}e[t].innerHTML=u.join("").trim(),e[t].removeAttribute("lr-loop")}}}render(){this.renderLoop()}restoreToTemplate(){this.root.innerHTML=this.template}reload(){this.restoreToTemplate(),this.render()}},A=b;export{A as default};
//# sourceMappingURL=list-renderer.mjs.map
