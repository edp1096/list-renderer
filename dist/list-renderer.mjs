var f=class{constructor(e){this.root=e,this.template="",this.regexForVariables=/{{(.*?)}}/g,this.loopDatas={},this.baseTemplate=""}evaluateString(e){return new Function("'use strict'; return ("+e+")")()}parseTemplate(e,t,i,r){if(typeof e!="object")return null;let c=this.loopDatas[i][r],l="",s=e.getAttribute("lr-if");if(s!=null){let o=!0;s=s.replace("$index",r);for(let[a,n]of Object.entries(c)){let u=s.replace(a,`"${n}"`);try{o=this.evaluateString(u)}catch{continue}break}if(e.removeAttribute("lr-if"),o!=null&&!o)return e.innerHTML="",e}let p=e.getAttribute("lr-click");p!=null&&(p=p.replace("$index",r),e.setAttribute("onclick",p),e.removeAttribute("lr-click"));let h=e.getAttribute("lr-change");h!=null&&(h=h.replace("$index",r),e.setAttribute("onchange",h),e.removeAttribute("lr-change"));let d=e.getAttribute("lr-checked");d!=null&&(d=d.replace("$index",r),e.setAttribute("onchange",d),e.removeAttribute("lr-change"));let g=e.getAttribute("lr-id");if(g!=null&&(g=g.replace("$index",r),e.setAttribute("data-id",g),e.removeAttribute("lr-id")),e.children!=null&&e.children.length>0){for(let o in e.children){let a=this.parseTemplate(e.children[o],t,i,r);a&&a.innerHTML.trim()!=""&&(l+=a.outerHTML)}e.innerHTML=""}else if(e.innerHTML!=""){let o=e.getAttributeNames();for(let a in o){let n=e.getAttribute(o[a]);n!=null&&(n=n.replace("$index",r),n=n.replace(this.regexForVariables,(u,b)=>{let T=this.evaluateString(`${t}["${b}"]`);return T==null&&(T=""),T}),e.setAttribute(o[a],n.replace("$index",r)))}e.innerHTML=e.innerHTML.replace(this.regexForVariables,(a,n)=>{let u=this.evaluateString(`${t}["${n}"]`);return u==null&&(u=""),u})}return l.length>0&&(e.innerHTML=l),e}renderLoop(){this.template=this.root.innerHTML;let e=this.root.children;for(let t in e)if(e[t].nodeType!=null&&e[t].tagName.toLowerCase()!="script"){let i=e[t].getAttribute("lr-loop");if(i==null||i==null)continue;let r=this.evaluateString(i);this.loopDatas[i]=r,this.baseTemplate=e[t].innerHTML;let c=new Array;if(i!=null){for(let l in r){e[t].innerHTML=this.baseTemplate;let s=this.parseTemplate(e[t],`${i}[${l}]`,i,l);s!=null&&c.push(s.innerHTML)}e[t].innerHTML=c.join("").trim(),e[t].removeAttribute("lr-loop")}}}render(){this.renderLoop()}restoreToTemplate(){this.root.innerHTML=this.template}reload(){this.restoreToTemplate(),this.render()}};globalThis.ListRenderer=f;var L=f;export{L as default};
//# sourceMappingURL=list-renderer.mjs.map
