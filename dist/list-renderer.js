var L=class{constructor(r){this.root=r,this.template="",this.dataForDisplay=new Array}evaluateString(r){return new Function("'use strict'; return ("+r+")")()}prepareEvents(r){let i=new Array;for(let t of r){let l=new Array;t.children.length>0&&(l=this.prepareEvents(t.children),l.length>0&&(i=i.concat(l)));let e=t.getAttribute("lr-click");e!=null&&e!=null&&(i=i.concat(e),t.setAttribute("onclick",e),t.removeAttribute("lr-click"))}return i}findAndSetList(){this.dataForDisplay=new Array;let r=new Array,i=new Array,t=this.root.children,l=/{{(.*?)}}/g;for(let e in t)if(t[e].nodeType!=null&&t[e].tagName.toLowerCase()!="script"){let m=t[e].getAttribute("lr-loop"),y=this.evaluateString(m);if(m!=null){this.template=t[e].outerHTML.trim();let g=this.prepareEvents(t[e].children);for(let d in t[e].children){let s=t[e].children[d];s.outerHTML!=null&&(r.push(s.getAttribute("lr-if")),s.removeAttribute("lr-if"),this.dataForDisplay.push(s.outerHTML.trim()),i.push(this.dataForDisplay[this.dataForDisplay.length-1].match(l)))}t[e].innerHTML="";for(let d in y){let s=y[d],u=new Array;for(let a in g){let n=g[a].replace("$index",d);u.push(n)}for(let a in this.dataForDisplay){let f=!0,n=this.dataForDisplay[a];for(let h in u){let o=u[h];n=n.replace(g[h],o)}let A=i[a];for(let h in A){let o=A[h],p=o.replace(l,"$1");if(r[a]!=null&&r[a].indexOf(p)!=-1){let C=r[a].replace(p,"'"+s[p]+"'");f=this.evaluateString(C)}if(!f){n="";break}let c=s[p];c==null&&(c=""),n=n.replace(o,c),c!=null&&(n=n.replace(o,c))}t[e].innerHTML+=n}}}}}render(){this.findAndSetList()}restoreToTemplate(){this.root.innerHTML=this.template}reload(){this.restoreToTemplate(),this.render()}},M=L;export{M as default};
//# sourceMappingURL=list-renderer.js.map
