var m=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var D=Object.prototype.hasOwnProperty;var F=(a,t)=>{for(var n in t)m(a,n,{get:t[n],enumerable:!0})},H=(a,t,n,e)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of v(t))!D.call(a,i)&&i!==n&&m(a,i,{get:()=>t[i],enumerable:!(e=b(t,i))||e.enumerable});return a};var w=a=>H(m({},"__esModule",{value:!0}),a);var K={};F(K,{default:()=>E});module.exports=w(K);var y=class{constructor(t){this.root=t,this.template="",this.dataForDisplay=new Array}evaluateString(t){return new Function("'use strict'; return ("+t+")")()}prepareEvents(t){let n=new Array;for(let e of t){let i=new Array;e.children.length>0&&(i=this.prepareEvents(e.children),i.length>0&&(n=n.concat(i)));let r=e.getAttribute("lr-click");r!=null&&r!=null&&(n=n.concat(r),e.setAttribute("onclick",r),e.removeAttribute("lr-click"))}return n}findAndSetList(){this.dataForDisplay=new Array;let t=new Array,n=new Array,e=this.root.children,i=/{{(.*?)}}/g;for(let r in e)if(e[r].nodeType!=null&&e[r].tagName.toLowerCase()!="script"){let A=e[r].getAttribute("lr-loop"),C=this.evaluateString(A);if(A!=null){this.template=e[r].outerHTML.trim();let u=this.prepareEvents(e[r].children);for(let h in e[r].children){let l=e[r].children[h];l.outerHTML!=null&&(t.push(l.getAttribute("lr-if")),l.removeAttribute("lr-if"),this.dataForDisplay.push(l.outerHTML.trim()),n.push(this.dataForDisplay[this.dataForDisplay.length-1].match(i)))}e[r].innerHTML="";for(let h in C){let l=C[h],f=new Array;for(let o in u){let s=u[o].replace("$index",h);f.push(s)}for(let o in this.dataForDisplay){let L=!0,s=this.dataForDisplay[o];for(let p in f){let c=f[p];s=s.replace(u[p],c)}let T=n[o];for(let p in T){let c=T[p],g=c.replace(i,"$1");if(t[o]!=null&&t[o].indexOf(g)!=-1){let M=t[o].replace(g,"'"+l[g]+"'");L=this.evaluateString(M)}if(!L){s="";break}let d=l[g];d==null&&(d=""),s=s.replace(c,d),d!=null&&(s=s.replace(c,d))}e[r].innerHTML+=s}}}}}render(){this.findAndSetList()}restoreToTemplate(){this.root.innerHTML=this.template}reload(){this.restoreToTemplate(),this.render()}},E=y;
//# sourceMappingURL=list-renderer.js.map
