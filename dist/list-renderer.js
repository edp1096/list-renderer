(()=>{var m=class{constructor(e){this.root=e,this.template="",this.regexForVariables=/{{(.*?)}}/g,this.loopDatas={},this.loopVariableName="",this.baseTemplate="",this.singleTags=["input","img","br","hr","link","meta","base","area","col","embed","keygen","param","source","track","wbr","command"]}evaluateString(e){return new Function("'use strict'; return ("+e+")")()}parseTemplate(e,r,c,i){var T,L;if(typeof e!="object")return null;let u=c,s="",d=e.getAttribute("lr-if");if(d!=null){let n=!0;d=d.replace("$index",i);for(let[a,t]of Object.entries(u)){let o=d.replace(a,`"${t}"`);try{n=this.evaluateString(o)}catch(b){continue}break}if(e.removeAttribute("lr-if"),n!=null&&!n)return e.innerHTML="",e}let g=e.getAttribute("lr-click");g!=null&&(g=g.replace("$index",i),e.setAttribute("onclick",g),e.removeAttribute("lr-click"));let h=e.getAttribute("lr-change");h!=null&&(h=h.replace("$index",i),e.setAttribute("onchange",h),e.removeAttribute("lr-change"));let p=e.getAttribute("lr-checked");p!=null&&(p=p.replace("$index",i),e.setAttribute("onchange",p),e.removeAttribute("lr-change"));let f=e.getAttribute("lr-id");if(f!=null&&(f=f.replace("$index",i),e.setAttribute("data-id",f),e.removeAttribute("lr-id")),e.children!=null&&e.children.length>0){for(let n in e.childNodes)switch(e.childNodes[n].nodeType){case Node.TEXT_NODE:if(((T=e.childNodes[n].textContent)==null?void 0:T.trim())!=""){let t=(L=e.childNodes[n].textContent)==null?void 0:L.trim();if(t==null)continue;t=t.replace("$index",i),t=t.replace(this.regexForVariables,(o,b)=>{let l=this.evaluateString(`${r}["${b}"]`);return l==null&&(l=""),l}),s+=t,console.log("result",s)}break;case Node.ELEMENT_NODE:let a=this.parseTemplate(e.childNodes[n],r,u,i);if(a)switch(!0){case this.singleTags.includes(a.tagName.toLowerCase()):s+=a.outerHTML;break;case a.innerHTML.trim()!="":s+=a.outerHTML;break;default:break}break;default:break}e.innerHTML=""}else if(e.innerHTML!=""||this.singleTags.includes(e.tagName.toLowerCase())){let n=e.getAttributeNames();for(let a in n){let t=e.getAttribute(n[a]);t!=null&&(t=t.replace("$index",i),t=t.replace(this.regexForVariables,(o,b)=>{let l=this.evaluateString(`${r}["${b}"]`);return l==null&&(l=""),l}),e.setAttribute(n[a],t.replace("$index",i)))}this.singleTags.includes(e.tagName.toLowerCase())||(e.innerHTML=e.innerHTML.replace(this.regexForVariables,(a,t)=>{let o=this.evaluateString(`${r}["${t}"]`);return o==null&&(o=""),o}))}return s.length>0&&(e.innerHTML=s),e}renderLoop(e){if(e.nodeType!=null&&e.tagName.toLowerCase()!="script"){let r=e.getAttribute("lr-loop");if(r==null||r==null)return;let c=this.evaluateString(r);this.loopDatas[r]=c,this.baseTemplate=e.innerHTML;let i=new Array;if(r!=null){for(let u in c){e.innerHTML=this.baseTemplate;let s=this.parseTemplate(e,`${r}[${u}]`,c[u],u);s!=null&&i.push(s.innerHTML)}e.innerHTML=i.join("").trim(),e.tagName.toLowerCase()=="list-renderer"&&(this.loopVariableName=r),e.removeAttribute("lr-loop")}}}render(){switch(this.template=this.root.innerHTML,this.root.tagName.toLowerCase()){case"list-renderer":this.renderLoop(this.root);break;default:let e=this.root.children;for(let r in e)this.renderLoop(e[r]);break}}restoreToTemplate(){this.root.tagName.toLowerCase()=="list-renderer"&&this.root.setAttribute("lr-loop",this.loopVariableName),this.root.innerHTML=this.template}reload(){this.restoreToTemplate(),this.render()}};globalThis.ListRenderer=m;globalThis.customElements.define("list-renderer",class extends HTMLElement{});var v=m;})();
