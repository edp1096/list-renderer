<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="Cache-Control" content="no-cache" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google" content="notranslate" />

    <title>List rendering class</title>
    <link rel="shortcut icon" href="#" type="image/x-icon">
</head>

<body>
    <button type=button onclick="addHumanData()">Add human data</button>
    <button type=button onclick="addAnimalData()">Add animal data</button>

    <div>
        Name / Age / Button to show index
    </div>

    <div id="human-container">
        <div lr-loop="human">
            <p><span>{{name}}</span> / {{age}} <button lr-click="showIndex($index)">Show index</button></p>
        </div>
    </div>

    <div id="animal-container">
        <div lr-loop="animal">
            <div lr-if="age > 5">
                <p>{{name}} / {{age}}</p>
            </div>
            <div lr-if="name == 'Bird'">
                <p>{{name}} / {{age}}</p>
            </div>
        </div>
    </div>
</body>

<!-- <script src="list-renderer.js"></script> -->
<script type="module">
    // https://stackoverflow.com/questions/64665485/can-i-mix-in-javascript-modules-with-regular-javascript
    // https://stackoverflow.com/questions/44590393/es6-modules-undefined-onclick-function-after-import

    import ListRenderer from './dist/list-renderer.js';

    const lrHuman = new ListRenderer(document.getElementById("human-container"))
    lrHuman.render()

    const lrAnimal = new ListRenderer(document.getElementById("animal-container"))
    lrAnimal.render()

    window.lrAnimal = lrAnimal
    window.lrHuman = lrHuman
</script>
<script>
    async function addHumanData() {
        human.push({ name: "Mark", age: "15" })
        human.push({ name: "Richard", age: "25" })
        human.push({ name: "Robert", age: "35" })

        lrHuman.reload()
    }

    async function addAnimalData() {
        animal.push({ name: "Zebra", age: "5" })
        animal.push({ name: "Shark", age: "25" })
        animal.push({ name: "Whale", age: "8" })

        lrAnimal.reload()
    }

    function showIndex(index) { alert(index) }

    const human = [
        { name: "John", age: 30 },
        { name: "Jane", age: 20 },
        { name: "Joe" },
        { name: "Sam", age: 10 },
        { name: "Sally", age: 5 }
    ]
    const animal = [
        { name: "Dog", age: 10 },
        { name: "Cat", age: 5 },
        { name: "Bird", age: 2 },
        { name: "Lion", age: 10 },
        { name: "Tiger", age: 5 },
        { name: "Elephant", age: 2 }
    ]
</script>

</html>